@implements IDisposable
@inject NavigationManager NavigationManager

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">
        Inicio
    </MudNavLink>

    <AuthorizeView>
        <Authorized>
            <MudNavGroup Title="Ligas" Icon="@Icons.Material.Filled.Groups" Expanded="true">
                <MudNavLink Href="ligas" Icon="@Icons.Material.Filled.List">
                    Minhas Ligas
                </MudNavLink>
                <MudNavLink Href="ligas/criar" Icon="@Icons.Material.Filled.Add">
                    Criar Liga
                </MudNavLink>
            </MudNavGroup>

            <MudNavGroup Title="Torneios" Icon="@Icons.Material.Filled.EmojiEvents">
                <MudNavLink Href="torneios" Icon="@Icons.Material.Filled.List">
                    Meus Torneios
                </MudNavLink>
            </MudNavGroup>

            <MudNavLink Href="ranking" Icon="@Icons.Material.Filled.Leaderboard">
                Ranking
            </MudNavLink>

            <MudNavLink Href="meus-debitos" Icon="@Icons.Material.Filled.Payments">
                Meus Debitos
            </MudNavLink>
        </Authorized>
    </AuthorizeView>
</MudNavMenu>

@code {
    private string? _currentUrl;

    protected override void OnInitialized()
    {
        _currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        _currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}
